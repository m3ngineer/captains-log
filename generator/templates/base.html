{% load static %}

<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE-edge'>
    <meta name='viewport' content=width='device-width, initial-scale=1'>
    <title>Home</title>
    <link href="{% static "bootstrap/css/bootstrap.min.css" %}" rel="stylesheet">
    <link href="{% static "base.css" %}" rel="stylesheet">
    {% block css %}{% endblock %}
    <style>
      tr, td {
        padding: 6px;
      }

      .response {
        padding: 6px 18px;
      }

      .prompt {
        font-style: italic;
      }

      .date {
        font-weight: bold;
      }

      .grey-bg {
        background: #e9ecef;
      }
    </style>
  </head>
  <body>
    <div class='container'>

      <div class='row'>
        <div class='col-md-8 offset-2 jumbotron'>
          <div class='text-center'>

            <h1>{% block date %}{% endblock %}</h1>

            <div><br></div>
            {% block form %}{% endblock %}

          </div>
        </div>
      </div>

      <div class='row'>
        <div class='col-md-8 offset-2'>
            {% block table %}
            {% endblock %}
        </div>
      </div>
    </div>

    <!-- <script>
      let table = document.getElementById('response_table');

      let editingTd;

      table.onclick = function(event) {

        // 3 possible targets
        let target = event.target.closest('.edit-cancel,.edit-ok,td');

        if (!table.contains(target)) return;

        if (target.className == 'edit-cancel') {
          finishTdEdit(editingTd.elem, false);
        } else if (target.className == 'edit-ok') {
          finishTdEdit(editingTd.elem, true);
        } else if (target.nodeName == 'TD') {
          if (editingTd) return; // already editing

          makeTdEditable(target);
        }

      };

      function makeTdEditable(td) {
        editingTd = {
          elem: td,
          data: td.innerHTML
        };

        td.classList.add('edit-td'); // td is in edit state, CSS also styles the area inside

        let textArea = document.createElement('textarea');
        textArea.style.width = td.clientWidth + 'px';
        textArea.style.height = td.clientHeight + 'px';
        textArea.className = 'edit-area';

        textArea.value = td.innerHTML;
        td.innerHTML = '';
        td.appendChild(textArea);
        textArea.focus();

        td.insertAdjacentHTML("beforeEnd",
          '<div class="edit-controls"><button class="edit-ok">OK</button><button class="edit-cancel">CANCEL</button></div>'
        );
      }

      function finishTdEdit(td, isOk) {
        if (isOk) {
          td.innerHTML = td.firstChild.value;
        } else {
          td.innerHTML = editingTd.data;
        }
        td.classList.remove('edit-td');
        editingTd = null;
      }
    </script> -->
  </body>
</html>
